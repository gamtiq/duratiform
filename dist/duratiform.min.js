!function(e,t){if(void 0===e&&void 0!==window&&(e=window),"object"==typeof module&&module.exports)module.exports=t(require,exports,module);else if("function"==typeof define&&define.amd)define(["require","exports","module"],t);else{var r={exports:e};e.duratiform=t(0,0,r)}}(this,function(e,t,r){function w(n,e,o){var i={};function t(e,t){var r;t<=n?(r=i[e]=Math.floor(n/t),n%=t):r=i[e]=0,o&&(i[e+"2"]=r<10?"0"+r:String(r))}return n*=.001,4<(e=e||3)&&t("week",604800),3<e&&t("day",86400),2<e&&t("hour",3600),1<e&&t("minute",60),0<e&&t("second",1),i}return r.exports={divide:w,format:function(e,t){var r,n,o,i,u,s,h,d,f=[],c=!0,a=null,l=[],p=0,m={w:["week",5],d:["day",4],h:["hour",3],m:["minute",2],s:["second",1]};function g(){return a&&l.concat(a)}function v(){var e,t,r,n,o=this.g;if(o){for(r=0,t=o.length;r<t;r++)if((e="!"===(n=o[r]).charAt(0))&&d[n.substring(1)]||!e&&!d[n]){o=!1;break}}else o=!0;return o?this.c||String(d[this.p]):""}for(n=0,o=(i=(t=t||"hh:mm:ss").length)-1;n<i;n++)u=t.charAt(n),s=t.charAt(n+1),c&&u in m?(d=m[u],s===u?(h=d[0]+"2",n++):h=d[0],f.push({p:h,g:g(),toString:v}),d[1]>p&&(p=d[1])):c&&"["===u?c=!1:c||"]"!==u?c&&"("===u&&(r="!"===s,1)&&":"===t.charAt(n+(r?3:2))&&(h=(r?t.charAt(n+2):s).match(/d|h|m|s|w/))?(a&&l.push(a),a=(r?"!":"")+m[h[0]][0],n+=r?3:2):c&&a&&")"===u?a=l.length?l.pop():null:("\\"!==u||n<o)&&("\\"===u&&(u=s,n++),f.push(a?{g:g(),c:u,toString:v}:u)):c=!0;return p&&(d=w(e,p,!0)),f.join("")}},r.exports});